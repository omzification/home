<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="Omar Dirar">
    <title>slaptop</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/slaptop/assets/slaptop.css">
    <script src="/slaptop/slaptop.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script>setupNav()</script>
    <script>var flickerAPI = "https://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?";

        $.getJSON(flickerAPI, {
        id: "197155581@N04",
        tags: "test, test2",
        tagmode: "any",
        format: "json"
        })
        .done(function (result, status, xhr) {
        
        console.log("Connecting to Flickr: " + status);
        
        const picsData = result.items;
        
        console.log('Flickr pics: ');
        console.log(picsData);
        
        
        if (status == "success") {
          picsFolder(picsData)
        }
        
        }).fail(function (xhr, status, error) {
        console.log("Result: " + status + " " + error + " " + xhr.status + " " + xhr.statusText);
        $('.picsFolderContent').append('<span> oops. something seems to have gone wrong :/ </span>');
        });
        
        
        // loading 'pics' folder with sub-folders using photo tags
        
        function picsFolder(picsData) {
        
        picsTag = picsData.map(item => item.tags)
        .filter((value, index, self) => self.indexOf(value) === index);
        
        console.log("Picture Tags: " + picsTag);
        
        for (let i = 0; i < picsTag.length; i++) {
        
        const tag = picsTag[i];
        
        tagData = picsData.filter(tagGroup => tagGroup.tags == picsTag[i]);
        
        $('.picsFolderContent')
          .append('<div id="'
               + tag +
               '-folder" class="folder-icon"><div><img src="/slaptop/assets/icons/Folder.png"></div><span>'
               + tag +
               '</span></div>');
        
        loadTagFolders(tagData, tag);
        
        openTagFolder(tag);
        
        
        
        }
        
        }
        
        function loadTagFolders(tagData, tag) {
        
        var $tagsDialogs = $('<div></div>')
          .addClass("tagsFolderContent " + tag + "")
          .dialog({
              autoOpen: false,
              title: tag,
              resizable: false,
          });
        
        $.each(tagData, function (i, pic) {
        
        
        
        
        
        $("<div id="
        + pic.title +
        " class=" + 'card-pic' + "><div><img id="
           + pic.title +
          "-src src=" + pic.media.m + "></div><span>"
           + pic.title +
           "</span></div>").appendTo("." + tag + "");
        });
        console.log(tagData);
        
        }
        
        
        
        openPicsFolder = function() {
        $dialog.dialog('open');
        }
        
        function openTagFolder(tag) {
        $("#" + tag + "-folder").on( 'click' , function() {
        $("." + tag + "").dialog('open')
        });
        }
        </script>
  </head>

  <body>
    <div id="desktop">
    <nav>
        <div class="nav-item">
            <button id="nav-logo">
                <img src="/slaptop/assets/icons/Home.png">
            </button>
        </div>
        <div class="nav-item">
            <button>File</button>
            <ul style="">
                <li>
                    <button id="nav-new-folder">New Folder<ins>N</ins></button>
                </li>
                <li>
                    <button id="startBtn" onclick="openCam()">Open<ins>O</ins></button>
                </li>
                <li>
                    <button onclick="window.print()">Print<ins>P</ins></button>
                </li>
                <li>
                    <button disabled="">Close Window</button>
                </li>
                <li class="line"></li>
                <li>
                    <button disabled="">Find...<ins>F</ins></button>
                </li>
            </ul>
        </div>
        <div class="nav-item">
            <button>View</button>
            <ul style="">
                <li>
                    <button id="nav-tos">Terms of Service</button>
                </li>
                <li>
                    <button id="nav-pp">Privacy Policy</button>
                </li>
                    <li class="nav-divisor"></li>
                <li>
                    <button id="nav-about">About</button>
                </li>
            </ul>
        </div>
        <div class="nav-item">
            <button>Special</button>
            <ul style="">
                <li>
                    <button onclick="openFullscreen()">Fullscreen</button>
                </li>
                <li>
                    <button disabled="">Log Out</button>
                </li>
            </ul>
        </div>
        <div class="nav-item">
            <button id="nav-contact">Contact</button>
        </div>
    </nav>
    <div id="CV" class="desktop-icon">
        <div>
            <img src="/slaptop/assets/icons/Text.png">
        </div>
        <span> CV </span>
     </div>
     <div id="files" class="desktop-icon">
        <div>
            <img src="/slaptop/assets/icons/Folder.png">
        </div>
        <span> files </span>
     </div>
     <div id="pics" class="desktop-icon" onclick="openPicsFolder()">
        <div>
            <img src="/slaptop/assets/icons/Folder.png">
        </div>
        <span> pics </span>
     </div>
     <div id="pic">
        <img id="picIMG">
     </div>
    </div>

    <script>
        var $dialog = $('<div></div>')
.addClass("picsFolderContent")
.dialog({
      autoOpen: false,
      title: "pics",
      resizable: false,
  });
    </script>

</body>